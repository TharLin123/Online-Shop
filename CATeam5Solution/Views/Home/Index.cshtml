@{
    ViewData["Title"] = "Home Page";
}

<h1 id="CartCount"></h1>
<button type="button" id="addToCart">Add To Cart</button>
<button type="button" id="removeFromCart">Remove From Cart</button>

@section scripts{
    <script>
        document.getElementById('addToCart').addEventListener('click', () => {

            var xhr = new XMLHttpRequest();

            xhr.open("POST", "/ShoppingCart/AddToCart");
            xhr.setRequestHeader("Content-Type", "application/json; charset=utf8");

            xhr.onreadystatechange = function () {
                if (this.readyState === XMLHttpRequest.DONE) {

                    if (this.status !== 200) return;

                    let data = JSON.parse(this.responseText);
                    document.getElementById('CartCount').innerHTML = data.cartCount;
                }
            };

            xhr.send();
        });

        document.getElementById('removeFromCart').addEventListener('click', () => {

            var xhr = new XMLHttpRequest();

            xhr.open("POST", "/ShoppingCart/RemoveFromCart");
            xhr.setRequestHeader("Content-Type", "application/json; charset=utf8");

            xhr.onreadystatechange = function () {
                if (this.readyState === XMLHttpRequest.DONE) {

                    if (this.status !== 200) return;

                    let data = JSON.parse(this.responseText);
                    document.getElementById('CartCount').innerHTML = data.cartCount;
                }
            };

            xhr.send();
        }); 
    </script>
}

